---
code: |
  if pa_received == True:
    pa_food_assistance_program
    #pa_received == False:
  else:
    pa_food_assistance_program = False
    pa_medicaid = False
    pa_family_independence_program = False
    pa_women_infants_children = False
    pa_state_disability = False
    pa_state_emergency_relief = False
    pa_refugee_assistance = False
    pa_supplemental_security = False
    pa_other = False
    # deleting these causes them to be asked again... *%@#ing docassemble...
    #del pa_mdhhs_case_number
    #del pa_other_types
    #del pa_other_case_numbers
  recompute_legal_service
  pa_recalc_trigger = True

---
code: |
  if pa_received == False:
    if legal_service_representation:
      legal_service_provider
    else:
      check_for_indigency
  recompute_legal_service = True

---
code: |
  if plaintiffs[0].has_attorney:
    plaintiff_attorneys[0].bar_number
    plaintiff_attorneys[0].address.address
  recompute_plaintiff_attorney = True
---
code: |
  if defendants[0].has_attorney:
    defendant_attorneys[0].bar_number
    defendant_attorneys[0].address.address
  recompute_defendant_attorney = True

---
id: fee waiver request review screen
event: review_fee_waiver_request
question: |
  Review your answers
review:
  - Edit: court_type
    button: |
      **Court Type**:
      ${ court_type }
  - Edit: case_type
    button: |
      **Does your court case have two parties (Plaintiff/Defendant or Petitioner/Respondent)?**:
      ${ case_type }
    show if: court_type == 'circuit'
#  - Edit: user_ask_role
#    button: |
#      **Are you the plaintiff/petitioner or the defendant/respondent in the court case?**:
#      ${ user_ask_role }
  - Edit: trial_court_circuit
    button: |
      **Circuit**:
      ${ trial_court_circuit }
    show if: court_type == 'circuit'
  - Edit: trial_court_district
    button: |
      **District**:
      ${ trial_court_district }
    show if: court_type == 'district'
  - Edit: docket_number
    button: |
      **Docket number**:
      ${ docket_number }
  - Edit: trial_court
    button: |
      **Trial court**
  
      % if defined("trial_court.address.address"):
      * address: ${ trial_court.address.block() }
      % endif
      % if defined("trial_court.phone_number"):
      * phone_number: ${ trial_court.phone_number }
      % endif
  - Edit: in_the_matter_of
    button: |
      **In the matter of**:
      ${ in_the_matter_of }
    show if: case_type == 'Matter'
    
  - Edit: users.revisit
    button: |
      **Your Information**

      % for item in users:
        ${ item }
        
        ${ item.address.block() }
        
        ${ word("") if item.no_phone_number else item.phone_numbers() }
      % endfor
  - Edit: other_parties.revisit
    button: |
      **Other Party Information**

      % for item in other_parties:
        ${ item }
        
        ${ item.address.block() }
        
        ${ word("") if item.no_phone_number else item.phone_numbers() }
      % endfor
    show if: case_type == 'Parties'
#  - Edit: plaintiffs.revisit
#    button: |
#      **Plaintiffs**
#
#      % for item in plaintiffs:
#        * ${ item }
#      % endfor
#    show if: case_type == 'Parties'
#  - Edit: defendants.revisit
#    button: |
#      **Defendants**
#
#      % for item in defendants:
#        * ${ item }
#      % endfor
#    show if: case_type == 'Parties'

  - Edit: 
    - plaintiffs[0].has_attorney
    - recompute:
      - recompute_plaintiff_attorney
    button: |
      **${ plaintiffs[0].name.full() } has attorney?**
      
      ${ plaintiffs[0].has_attorney }
  - Edit: 
    - plaintiff_attorneys[0].bar_number # do bar first so it triggers custom page
    - plaintiff_attorneys[0].name.first
    - plaintiff_attorneys[0].address.address
    - plaintiff_attorneys[0].address.unit
    - plaintiff_attorneys[0].address.city
    - plaintiff_attorneys[0].address.state
    - plaintiff_attorneys[0].address.zip
    - plaintiff_attorneys[0].phone_number
    button: |
      **Plaintiff's attorney**:

      ${ plaintiff_attorneys[0].name.full() }
      ${ plaintiff_attorneys[0].bar_number }
      
      ${ plaintiff_attorneys[0].address.block() }
      
      Phone: ${ phone_number_formatted(plaintiff_attorneys[0].phone_number) }
    show if: plaintiffs[0].has_attorney

  - Edit: 
    - defendants[0].has_attorney
    - recompute:
      - recompute_defendant_attorney
    button: |
      **${ defendants[0].name.full() } has attorney?**
      
      ${ defendants[0].has_attorney }
  - Edit: 
    - defendant_attorneys[0].bar_number
    - defendant_attorneys[0].name.first
    - defendant_attorneys[0].address.address
    - defendant_attorneys[0].address.unit
    - defendant_attorneys[0].address.city
    - defendant_attorneys[0].address.state
    - defendant_attorneys[0].address.zip
    - defendant_attorneys[0].phone_number
    button: |
      **Defendant's attorney**:
      
      ${ defendant_attorneys[0].name.full() }
      ${ defendant_attorneys[0].bar_number }
      
      ${ defendant_attorneys[0].address.block() }
      
      Phone: ${ phone_number_formatted(defendant_attorneys[0].phone_number) }
    show if: defendants[0].has_attorney

  - Edit:
    - pa_received
    - recompute:
      - pa_recalc_trigger
      - recompute_legal_service
      - fuck_this_shit
      - pa_other_list
      - unable_to_pay
    button: |
      **Public assistance received**:
      ${ word(yesno(pa_received)) }
      
      Food Assistance Program (FAP or SNAP): ${ word(yesno(pa_food_assistance_program)) }
      
      Medicaid: ${ word(yesno(pa_medicaid)) }
      
      Family Independence Program (FIP or TANF): ${ word(yesno(pa_family_independence_program)) }
      
      Women, Infants, and Children benefits (WIC): ${ word(yesno(pa_women_infants_children)) }
      
      State Disability Assistance (SDA): ${ word(yesno(pa_state_disability)) }
      
      State Emergency Relief (SER): ${ word(yesno(pa_state_emergency_relief)) }
      
      Refugee Assistance Program (RAP): ${ word(yesno(pa_refugee_assistance)) }
      
      Supplemental Security Income (SSI): ${ word(yesno(pa_supplemental_security)) }
      
      Other means-tested public assistance: ${ word(yesno(pa_other)) }
  - Edit: pa_mdhhs_case_number
    button: |
      **What is your MDHHS case number?**:
      ${ pa_mdhhs_case_number }
  - Edit: pa_other_types
    button: |
      **Other types(s) of public assistance received**:
      ${ pa_other_types }
    show if: pa_other == True
  - Edit: pa_other_case_numbers
    button: |
      **Other public assistance case numbers**:
      ${ pa_other_case_numbers }
    show if: pa_other == True
  - Edit: pa_ssa_number
    button: |
      **SSA Case #**:
      ${ pa_ssa_number }
    show if: pa_supplemental_security == True

  - Edit: 
      - legal_service_representation
      - recompute: 
        - pa_received
        - pa_food_assistance_program
        - recompute_legal_service
    button: |
      **Receive legal assistance?**
      ${ word(yesno(legal_service_representation)) }
  - Edit: legal_service_provider
    button: |
      **Name of the legal service provider or law school clinic**:
      ${ legal_service_provider }

  - label: Edit
    fields: 
      - household_income
      - household_income_period
    button: |
      Gross household income:
      ${ household_income }
      Per:
      ${ household_income_period }
  - Edit: household_size
    button: |
      **Household size**:
      ${ household_size }
  - Edit: household_income_sources
    button: |
      **Household income sources**:
      ${ household_income_sources }
  - Edit: income_employment
    button: |
      **Are you employed?**:
      ${ word(yesno(income_employment)) }
  - Edit: income_unemployment
    button: |
      **Do you receive unemployment benefits?**:
      ${ word(yesno(income_unemployment)) }

---
continue button field: plaintiffs.revisit
question: |
  Edit plaintiffs
subquestion: |
  ${ plaintiffs.table }

  ${ plaintiffs.add_action() }
---
table: plaintiffs.table
rows: plaintiffs
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Phone number: |
      row_item.phone_number if defined("row_item.phone_number") else ""
edit:
  - name.first
  - address.address
  - phone_number
confirm: True

---
continue button field: defendants.revisit
question: |
  Edit defendants
subquestion: |
  ${ defendants.table }

  ${ defendants.add_action() }
---
table: defendants.table
rows: defendants
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Phone number: |
      row_item.phone_number if defined("row_item.phone_number") else ""
edit:
  - name.first
  - address.address
  - phone_number
confirm: True

---
continue button field: users.revisit
question: |
  Edit your information
subquestion: |
  ${ users.table }
---
table: users.table
rows: users
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Phone number: |
      row_item.phone_number if defined("row_item.phone_number") else ""
edit:
  - name.first
  - name.middle
  - name.last
confirm: True

---
continue button field: other_parties.revisit
question: |
  Edit other party  information
subquestion: |
  ${ other_parties.table }
---
table: other_parties.table
rows: other_parties
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Phone number: |
      row_item.phone_number if defined("row_item.phone_number") else ""
edit:
  - name.first
  - name.middle
  - name.last
confirm: True
